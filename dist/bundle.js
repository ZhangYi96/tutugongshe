!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="dist/",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);class s{constructor(t="",i,e,s,h,n,o,c=0,r=0){this.img=new Image,this.img.src=t,this.sx=i,this.sy=e,this.swidth=s,this.sheight=h,this.x=c,this.y=r,this.width=n,this.height=o,this.visible=!0}drawToCanvas(t){if(this.visible){var i=this.img;t.drawImage(i,this.sx,this.sy,this.swidth,this.sheight,this.x,this.y,this.width,this.height)}}isCollideWith(t){let i=t.x+t.width/2,e=t.y+t.height/2;return!(!this.visible||!t.visible)&&!!(i>=this.x&&i<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}}const h=document.documentElement.clientWidth||document.body.clientWidth,n=document.documentElement.clientHeight||document.body.clientHeight,o=1080/h,c=1920/n;class r extends s{constructor(t,i,e,s,h){super(t,i[0],i[1],e,s,e/o,s/c);this.x=n*h[0],this.y=n*h[1]}checkIsFingerOnThis(t,i){console.log("check XY",t,i);return!!(t>=this.x-0&&i>=this.y-0&&t<=this.x+this.width+0&&i<=this.y+this.height+0)}}const d=document.documentElement.clientWidth||document.body.clientWidth,a=document.documentElement.clientHeight||document.body.clientHeight,u=1080/d,l=1920/a,m="images/Mission1/BG1.png",g="images/Mission1/BG2.png",p="images/Mission1/BG3.png",y="images/Mission1/BG4.png",w=1080,v=1920;class b extends s{constructor(t){super(g,0,0,1080,1920,0,0,w/u,v/l),this.sw1=-1080,this.sw2=0,this.sw3=1080,this.sw4=2160,this.sWidth=1080,this.sHeight=1920,this.img1=new Image,this.img1.src=m,this.img3=new Image,this.img3.src=p,this.img4=new Image,this.img4.src=y,this.render(t)}update(t){this.sw1-=t,this.sw2-=t,this.sw3-=t,this.sw4-=t}render(t){t.drawImage(this.img1,0,0,this.sWidth,this.sHeight,this.sw1/u,0,w/u,v/l),t.drawImage(this.img,0,0,this.sWidth,this.sHeight,this.sw2/u,0,w/u,v/l),t.drawImage(this.img3,0,0,this.sWidth,this.sHeight,this.sw3/u,0,w/u,v/l),t.drawImage(this.img4,0,0,this.sWidth,this.sHeight,this.sw4/u,0,w/u,v/l)}}const f=document.documentElement.clientWidth||document.body.clientWidth,x=document.documentElement.clientHeight||document.body.clientHeight,I=1080/f,T=1920/x,E="images/Mission1/welcome.png";class H extends s{constructor(t,i){super(E,0,0,770,400,770/I,400/T),this.points=[[0,0],[0,400],[0,800],[0,1200],[0,1600]],this.y=3.5*this.height,this.x=this.width/2.2,this.image=new Image,this.image.src=t,this.count=i}update(t=-1,i=-1){this.count<5?(this.sx=this.points[this.count][0],this.sy=this.points[this.count][1],this.count++):(this.img=this.image,-1==t?this.visible=!1:(this.visible=!0,this.sx=t,this.sy=i))}}const C=document.documentElement.clientWidth||document.body.clientWidth,W=document.documentElement.clientHeight||document.body.clientHeight,F=1080/C,L=1920/W;class k extends s{constructor(t,i,e,s,h,n,o,c,r){super(t,i,e,s,h,s/F,h/L,c,r),this.y=(h-r)/L,this.initsx=i,this.initsy=e}update(t=-1,i=-1){-1==t?(this.sx=this.initsx,this.sy=this.initsy):(this.sx=t,this.sy=i)}}const M=document.documentElement.clientWidth||document.body.clientWidth,O=document.documentElement.clientHeight||document.body.clientHeight,B=1080/M,S=1920/O;var j=document.getElementById("myCanvas");j.getContext("2d");class A extends s{constructor(t,i,e,s,h,n){super(t,i[0],i[1],e[0],e[1],e[0]/B,e[1]/S),this.x1=i[0],this.x2=n[0],this.y1=i[1],this.y2=n[1],this.rect=[e[0],e[1]],this.isClearance=e[4],this.person=s,this.words=h;var o=M/2,c=O/2;this.x=o+this.width*e[2],this.y=c-this.height*e[3],this.touched=!1,this.initEvent()}update(t){this.x-=t/B}initEvent(){this.touchstart=this.spritetouchstart.bind(this),j.addEventListener("touchstart",this.touchstart)}click(){this.touched?(this.sx=this.x2,this.sy=this.y2,0==this.x2&&0==this.y2&&(this.swidth=0,this.sheight=0),this.touched=!1):(this.sx=this.x1,this.sy=this.y1,this.swidth=this.rect[0],this.sheight=this.rect[1])}spritetouchstart(t){t.preventDefault();let i=t.touches[0].clientX,e=t.touches[0].clientY;this.checkIsFingerOnThis(i,e)&&(this.touched=!0)}updateImg(t){var i=new Image;i.src=t,this.img=i}checkIsFingerOnThis(t,i){return!!(t>=this.x-0&&i>=this.y-0&&t<=this.x+this.width+0&&i<=this.y+this.height+0)}removeListener(){j.removeEventListener("touchstart",this.touchstart)}}const D=document.documentElement.clientWidth||document.body.clientWidth,X=(document.documentElement.clientHeight||document.body.clientHeight,1080/D);class _ extends s{constructor(t,i,e,s){super(t,i[0][0],i[0][1],e,s,e/X,s/X,0,0),this.points=i;this.x=D-this.width,this.y=0}update(t){this.sx=this.points[t][0],this.sy=this.points[t][1]}}const G=document.documentElement.clientWidth||document.body.clientWidth,P=document.documentElement.clientHeight||document.body.clientHeight,q=1080/G,Y=1920/P;document.getElementById("myCanvas").getContext("2d");class R{renderComplete(t){init(t)}init(t){var i=new Image;i.src="images/extra/complete.png",t.drawImage(i,0,0,1080,1920,0,0,1080/q,1920/Y),this.again=new r("images/extra/btnsprite.png",[1462,164],407,122,[.05,.3]),this.again.drawToCanvas(t),this.next=new r("images/extra/btnsprite.png",[1053,164],407,122,[.32,.3]),this.next.drawToCanvas(t),this.getCet=new r("images/extra/btnsprite.png",[1,181],407,122,[.2,.4]);var e=new Image;e.src="images/extra/winner.png",this.getCet.drawToCanvas(t),t.drawImage(e,0,0,992,1095,.04*G,.45*P,992/q,1095/Y)}}var z=document.getElementById("myCanvas");let J=z.getContext("2d"),K=0;const N=document.documentElement.clientWidth||document.body.clientWidth;document.documentElement.clientHeight||document.body.clientHeight;class Q{constructor(){this.aniId=0,this.personalHighScore=null,this.scale=1080/N,this.keyImg="./images/Mission1/object.png",this.complete=new R,this.restart(),this.initevent()}restart(){this.removeAllTouchListner(),this.scores=[0,0,0,0,0],this.rightwindow=new A(this.keyImg,[1433,506],[340,580,.3,.5],[-1,-1],[-1,-1],[416,506]),this.fly=new A(this.keyImg,[110,0],[80,80,2,1,1],[0,0],[0,800],[0,0]),this.fly.visible=!1;var t=[[[690,140],[960,140],[400,930],[770,800]],[[1230,140],[0,506],[800,930],[0,400]],[[1390,0],[0,0],[800,0],[0,0]],[[0,0],[0,0],[800,0],[770,0]],[[1455,0],[0,0],[400,0],[770,400]],[[0,140],[0,0],[800,0],[770,1200]],[[753,506],[1093,506],[-1,-1],[-1,-1]]],i=[[270,270,2.9,1.3,1],[413,366,-3.1,.39,1],[65,115,11.2,.81,0],[110,50,9,.61,0],[120,120,16.9,-1.5,1],[160,160,6.8,-.9,0],[340,580,-.5,.5,0]];this.bg=new b(J),this.pic=new A(this.keyImg,[160,140],[180,200,7,2,1],[0,0],[0,1200],[340,140]),this.pic.ischange=!1;for(var e=[],s=0;s<t.length;s++){var h=new A(this.keyImg,t[s][0],i[s],t[s][2],t[s][3],t[s][1]);e.push(h)}this.spritesForType2=e,this.player=new k("./images/Mission1/person.png",0,930,400,930,400/this.scale,930/this.scale,0,0),this.welcome=new H("./images/Mission1/words.png",1);this.scoreImg=new _("./images/Mission1/object.png",[[590,0],[790,0],[1190,0],[990,0],[390,0],[190,0]],200,110),this.bindLoop=this.loop.bind(this),this.hasEventBind=!1,window.cancelAnimationFrame(this.aniId),this.aniId=window.requestAnimationFrame(this.bindLoop,z)}render(){if(J.clearRect(0,0,z.width,z.height),this.isSuccess()<5){this.bg.render(J);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].drawToCanvas(J);this.pic.drawToCanvas(J),this.welcome.drawToCanvas(J),this.rightwindow.drawToCanvas(J),this.fly.drawToCanvas(J),this.player.drawToCanvas(J),this.scoreImg.drawToCanvas(J)}else this.removeAllTouchListner(),this.complete.init(J),this.touchHandler=this.completetouch.bind(this),z.addEventListener("touchstart",this.touchHandler)}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,e=t.touches[0].clientY;this.complete.again.checkIsFingerOnThis(i,e)&&this.restart()}loop(){this.render(),this.aniId=window.requestAnimationFrame(this.bindLoop,z)}initevent(){this.touchstart=this.eventTouchstart.bind(this),z.addEventListener("touchstart",this.touchstart),this.touchend=this.eventTouchend.bind(this),z.addEventListener("touchend",this.touchend.bind(this)),this.touchmove=this.eventTouchmove.bind(this),z.addEventListener("touchmove",this.touchmove.bind(this))}isSuccess(){var t=0;return this.scores.forEach(function(i){t+=i}),t}eventTouchstart(t){t.preventDefault();let i=t.touches[0].clientX;K=i}eventTouchend(t){t.preventDefault();var i=-1;if(this.welcome.count<5)this.welcome.update();else{for(var e=[-1,-1],s=[-1,-1],h=!1,n=0;n<this.spritesForType2.length;n++)1==this.spritesForType2[n].isClearance&&i++,this.spritesForType2[n].touched&&(1==this.spritesForType2[n].isClearance&&(this.scores[i]=1),e=this.spritesForType2[n].person,s=this.spritesForType2[n].words,h=!0),this.spritesForType2[n].click();h||(i++,this.pic.touched&&0==this.pic.ischange?(this.scores[i]=1,this.pic.sx=this.pic.x2,this.pic.sy=this.pic.y2,this.pic.swidth=350,this.pic.sheight=240,this.pic.width=350/this.scale,this.pic.height=240/this.scale,this.pic.y=this.pic.y-this.pic.height/8,this.pic.touched=!1,e=this.pic.person,s=this.pic.words,this.pic.ischange=!0):this.pic.touched||1!=this.pic.ischange||(this.pic.ischange=!1,this.pic.sx=this.pic.x1,this.pic.sy=this.pic.y1,this.pic.swidth=180,this.pic.sheight=220,this.pic.y=this.pic.y+this.pic.height/8,this.pic.width=180/this.scale,this.pic.height=220/this.scale),i++,this.fly.touched?(this.scores[i]=1,e=this.fly.person,s=this.fly.words,this.fly.click()):this.fly.click(),this.rightwindow.touched?(this.rightwindow.click(),this.fly.visible=!0):(this.rightwindow.click(),this.fly.visible=!1)),this.player.update(e[0],e[1]),this.welcome.update(s[0],s[1])}this.scoreImg.update(this.isSuccess())}eventTouchmove(t){if(t.preventDefault(),this.welcome.count>4){let s=t.touches[0].clientX;var i=(K-s)*this.scale;if(this.bg.sw2-i<1080&&this.bg.sw2-i>-1840){this.bg.update(i);for(var e=0;e<this.spritesForType2.length;e++)this.spritesForType2[e].update(i);this.pic.update(i),this.fly.update(i),this.rightwindow.update(i),K=s}}}removeAllTouchListner(){if(z.removeEventListener("touchstart",this.touchstart),z.removeEventListener("touchend",this.touchend),z.removeEventListener("touchmove",this.touchmove),void 0!==this.spritesForType2){for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].removeListener();this.pic.removeListener(),this.fly.removeListener(),this.rightwindow.removeListener()}}}const U=document.documentElement.clientWidth||document.body.clientWidth,V=document.documentElement.clientHeight||document.body.clientHeight,Z=1080/U,$=1920/V;var tt=document.getElementById("myCanvas");let it=tt.getContext("2d");var et=document.getElementById("myCanvas");const st=document.documentElement.clientWidth||document.body.clientWidth,ht=document.documentElement.clientHeight||document.body.clientHeight;et.width=st,et.height=ht,new class{constructor(){this.personalHighScore=null,this.scale=1080/U,this.init()}init(){this.keyImg=new Image,this.keyImg.src="./images/extra/gameStartBG.png",this.play=new r("./images/extra/btnsprite.png",[1053,1],910,161,[.049,.689]),this.touchend=this.eventTouchend.bind(this),tt.addEventListener("touchstart",this.touchend),this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,tt)}eventTouchend(t){t.preventDefault();let i=t.touches[0].clientX,e=t.touches[0].clientY;this.play.checkIsFingerOnThis(i,e)&&(tt.removeEventListener("touchstart",this.touchend),new Q)}render(){var t=this.keyImg;t.onload=function(){it.drawImage(t,0,0,1080,1920,0,0,1080/Z,1920/$)},this.play.drawToCanvas(it),this.aniId=window.requestAnimationFrame(this.bindLoop,tt)}loop(){this.render()}}}]);