!function(t){var i={};function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(e,n,function(i){return t[i]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="dist/",s(s.s=0)}([function(t,i,s){"use strict";s.r(i);class e{constructor(t="",i,s,e,n,h,o,a=0,c=0){this.img=new Image,this.img.src=t,this.sx=i,this.sy=s,this.swidth=e,this.sheight=n,this.x=a,this.y=c,this.width=h,this.height=o,this.visible=!0}drawToCanvas(t){this.visible&&t.drawImage(this.img,this.sx,this.sy,this.swidth,this.sheight,this.x,this.y,this.width,this.height)}isCollideWith(t){let i=t.x+t.width/2,s=t.y+t.height/2;return!(!this.visible||!t.visible)&&!!(i>=this.x&&i<=this.x+this.width&&s>=this.y&&s<=this.y+this.height)}}const n=document.documentElement.clientWidth||document.body.clientWidth,h=document.documentElement.clientHeight||document.body.clientHeight,o=1920;let a=1080/n;class c extends e{constructor(t,i,s,e,n){super(i,0,0,1080,1920,0,0,1080/a,o/a),this.sizeW=s,this.sizeH=e,this.sWidth=1080,this.sHeight=1920,this.initx=n,this.minX=0,this.maxX=s-1080,this.render(t)}update(t){this.x+=t,this.x=this.x<this.minX?this.minX:this.x,this.x=this.x>this.maxX?this.maxX:this.x}init(){this.x=this.initx}render(t){t.drawImage(this.img,this.x,0,this.sWidth,this.sHeight,0,0,n,h)}isIntheExtent(t){return this.x+t>=this.minX&&this.x+t<=this.maxX}}const r=document.documentElement.clientWidth||document.body.clientWidth,d=document.documentElement.clientHeight||document.body.clientHeight;let l=1080/r;class u extends e{constructor(t,i,s,e,n){super(t,0,0,e,n,e/l,n/l),this.points=i,this.y=d*s[1],this.x=r*s[0],this.image=new Image,this.image.src=t,this.sx=this.points[0][0],this.sy=this.points[0][1],this.count=0}update(t,i=-1,s=-1){this.y=d*t[1],this.x=r*t[0],this.count<this.points.length?(this.visible=!0,this.sx=this.points[this.count][0],this.sy=this.points[this.count][1],this.count++):-1==i?this.visible=!1:(this.visible=!0,this.sx=i,this.sy=s)}}const m=document.documentElement.clientWidth||document.body.clientWidth,p=document.documentElement.clientHeight||document.body.clientHeight;let g=1080/m;class v extends e{constructor(t,i,s,e,n,h,o,a,c){super(t,i,s,e,n,h,o),this.x=m*a,this.y=p*c,this.initsx=i,this.initsy=s,this.initx=m*a}fresh(t){this.x-=t/g}init(){this.x=this.initx}update(t=-1,i=-1){-1==t?(this.sx=this.initsx,this.sy=this.initsy):(this.sx=t,this.sy=i)}}const w=document.documentElement.clientWidth||document.body.clientWidth,y=document.documentElement.clientHeight||document.body.clientHeight,T=1080/w,b=1920/y;class f extends e{constructor(t,i,s,e,n,h){super(t,i[0],i[1],s[0],s[1],s[0]/T,s[1]/b),this.x1=i[0],this.x2=h[0],this.y1=i[1],this.y2=h[1],this.rect=[s[0],s[1]],this.isClearance=s[4],this.person=e,this.words=n;var o=w/2,a=y/2;this.x=o+this.width*s[2],this.y=a-this.height*s[3],this.initx=o+this.width*s[2],this.touched=!1}update(t){this.x-=t/T}init(){this.touched=!1,this.x=this.initx,this.sx=this.x1,this.sy=this.y1}initEvent(){canvas.addEventListener("touchend",(t=>{t.preventDefault()}).bind(this)),canvas.addEventListener("touchstart",(t=>{t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.checkIsFingerOnThis(i,s)?this.touched=!0:this.touched=!1}).bind(this))}updateImg(t){var i=new Image;i.src=t,this.img=i}drawToCanvas(t){1==this.touched?(this.sx=this.x2,this.sy=this.y2,0!=this.x2&&0!=this.y2&&super.drawToCanvas(t)):(this.sx=this.x1,this.sy=this.y1,this.swidth=this.rect[0],this.sheight=this.rect[1],super.drawToCanvas(t))}checkIsFingerOnThis(t,i){return!!(t>=this.x-0&&i>=this.y-0&&t<=this.x+this.width+0&&i<=this.y+this.height+0)}removeListener(){canvas.removeEventListener("touchstart",this.touchstart)}}const I=document.documentElement.clientWidth||document.body.clientWidth,x=document.documentElement.clientHeight||document.body.clientHeight,F=1080/I,E=1920/x;class L extends e{constructor(t,i,s,e,n){super(t,i[0],i[1],s,e,s/F,e/E);this.initx=I*n[0],this.x=I*n[0],this.y=x*n[1]}init(){this.touched=!1,this.x=this.initx}update(t){this.y-=t/E}checkIsFingerOnThis(t,i){return!!(t>=this.x-0&&i>=this.y-0&&t<=this.x+this.width+0&&i<=this.y+this.height+0)}}canvas.getContext("2d");const C=document.documentElement.clientWidth||document.body.clientWidth,A=document.documentElement.clientHeight||document.body.clientHeight,S=1080/C,k=1920/A;let M=["./images/Score/Score4.png","./images/Score/Score5.png"],B=[[[810,2],[608,2],[406,2],[204,2],[2,2]],[[2,512],[2,410],[2,308],[2,206],[2,104],[2,2]]],H=200,W=100;class O extends e{constructor(t){var i=B[t][0][0],s=B[t][0][1];super(M[t],i,s,H,W,H/S,W/k,0,0),this.points=B[t];this.x=C-this.width,this.y=0,this.type=t}update(t){this.sx=this.points[t][0],this.sy=this.points[t][1]}}let X=canvas.getContext("2d");document.documentElement.clientWidth||document.body.clientWidth;const D=document.documentElement.clientHeight||document.body.clientHeight;const Y=document.documentElement.clientWidth||document.body.clientWidth,q=document.documentElement.clientHeight||document.body.clientHeight,R=1080/Y,P=1920/q;class K extends e{constructor(t,i,s,e,n){super(i,0,0,1080,1920,1080/R,1920/P),this.sWidth=1080,this.sHeight=1920,this.inity=n,this.minY=0,this.maxY=e-1920,this.render(t)}update(t){this.y+=t,this.y=this.y<this.minY?this.minY:this.y,this.y=this.y>this.maxY?this.maxY:this.y}init(){this.y=this.inity}render(t){t.drawImage(this.img,0,this.y,this.sWidth,this.sHeight,0,0,Y,q)}isIntheExtent(t){return this.y+t>=this.minY&&this.y+t<=this.maxY}}document.documentElement.clientWidth||document.body.clientWidth;const j=1920/(document.documentElement.clientHeight||document.body.clientHeight);let G=canvas.getContext("2d");class _{init(t){this.clickType=0,this.lasty=0,this.BG=new K(G,t,1080,5e3,0),this.returnBtn=new L("images/Setting/Setting.png",[2,150],306,85,[.32,2.46]),this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.initevent()}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}render(){this.BG.render(G),this.returnBtn.drawToCanvas(G),1==this.clickType&&(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),canvas.removeEventListener("touchmove",this.touchmove),rt.restart())}returnEvent(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;console.log(Pt.clickType),this.returnBtn.checkIsFingerOnThis(i,s)&&(this.clickType=1),this.lasty=s}eventTouchmove(t){t.preventDefault();let i=t.touches[0].clientY;var s=(this.lasty-i)*j;console.log("移动"+s),this.BG.isIntheExtent(s)&&(this.BG.update(s),this.returnBtn.update(s),this.lasty=i)}initevent(){this.touchstart=this.returnEvent.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.touchmove=this.eventTouchmove.bind(this),canvas.addEventListener("touchmove",this.touchmove)}}const z=document.documentElement.clientWidth||document.body.clientWidth,J=document.documentElement.clientHeight||document.body.clientHeight,N=1080/z,Q=1920/J;let U=canvas.getContext("2d");class V{constructor(){this.atlas=new Image,this.onImg=[310,150],this.offImg=[548,2]}init(t){this.clickType=-1,this.atlas.src=t,this.bgMusic=new L("images/Setting/Setting.png",this.onImg,289,81,[.55,.22]),this.clickMusic=new L("images/Setting/Setting.png",this.onImg,289,81,[.55,.3]),this.returnBtn=new L("images/Setting/Setting.png",[422,2],124,124,[0,0]),this.touchstart=this.completetouch.bind(this),this.bindLoop=this.loop.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}render(){U.drawImage(this.atlas,0,0,1080,1920,0,0,1080/N,1920/Q),1==jt.isPlayBgm?(this.bgMusic.sx=this.onImg[0],this.bgMusic.sy=this.onImg[1]):(this.bgMusic.sx=this.offImg[0],this.bgMusic.sy=this.offImg[1]),this.bgMusic.drawToCanvas(U),1==jt.isPlayShoot?(this.clickMusic.sx=this.onImg[0],this.clickMusic.sy=this.onImg[1]):(this.clickMusic.sx=this.offImg[0],this.clickMusic.sy=this.offImg[1]),this.clickMusic.drawToCanvas(U),this.returnBtn.drawToCanvas(U),3==this.clickType&&(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),rt.restart())}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.bgMusic.checkIsFingerOnThis(i,s)&&(console.log("bgM"),1==jt.isPlayBgm?jt.isPlayBgm=0:jt.isPlayBgm=1,jt.playBgm()),this.clickMusic.checkIsFingerOnThis(i,s)&&(1==jt.isPlayShoot?jt.isPlayShoot=0:jt.isPlayShoot=1),this.returnBtn.checkIsFingerOnThis(i,s)&&(this.clickType=3)}}const Z=document.documentElement.clientWidth||document.body.clientWidth,$=document.documentElement.clientHeight||document.body.clientHeight,tt=1080/Z,it=1920/$;let st=canvas.getContext("2d"),et="./images/ChooseMission/ChooseBG.png",nt=[[2,646],[388,324],[2,324],[388,2],[2,2]];const ht=document.documentElement.clientWidth||document.body.clientWidth,ot=document.documentElement.clientHeight||document.body.clientHeight,at=1080/ht,ct=1920/ot,rt=new class{init(){this.isShowTips=0,this.atlas=new Image,this.atlas.src=et,this.miss=[],this.fanwaiScene=new _,this.settingScene=new V;for(var t=0;t<nt.length;t++){var i=Math.floor(t/2),s=t%2,e=new L("images/ChooseMission/ChooseMission.png",nt[t],384,320,[.136+.38*s,.21+.17*i]);this.miss.push(e)}this.chooseMission=-1,this.fanwai=new L("images/Setting/Setting.png",[107,2],103,146,[.1,.91]),this.egg=new L("images/Setting/Setting.png",[317,2],103,146,[.33,.91]),this.test=new L("images/Setting/Setting.png",[212,2],103,146,[.57,.91]),this.setting=new L("images/Setting/Setting.png",[2,2],103,146,[.8,.91]),this.tips=new L("images/Setting/tips.png",[2,334],782,164,[.16,.75]),this.bindLoop=this.loop.bind(this),this.restart()}restart(){this.isShowTips=0,this.chooseMission=-1,this.settingBtn=-1,this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.touchstart=this.choose.bind(this),canvas.addEventListener("touchstart",this.touchstart)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}choose(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;console.log("progress:"+qt);for(var e=0;e<this.miss.length;e++)if(this.miss[e].checkIsFingerOnThis(i,s)){if(e<=qt[0]){this.chooseMission=e;break}this.isShowTips=100}this.fanwai.checkIsFingerOnThis(i,s)&&(this.settingBtn=1),this.setting.checkIsFingerOnThis(i,s)&&(this.settingBtn=2),this.test.checkIsFingerOnThis(i,s)&&(window.location.href="http://9.u.h5mc.com/c/y4ah/smw_/index.html"),console.log("选择关卡:"+this.chooseMission)}render(){st.drawImage(this.atlas,0,0,1080,1920,0,0,1080/tt,1920/it);for(var t=0;t<this.miss.length;t++)this.miss[t].drawToCanvas(st);this.egg.drawToCanvas(st),this.test.drawToCanvas(st),this.fanwai.drawToCanvas(st),this.setting.drawToCanvas(st),this.chooseMission>-1&&(console.log("choose to mission"),window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),Rt[this.chooseMission].restart()),1==this.settingBtn?(console.log("fanwai Btn clcik"),window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),this.fanwaiScene.init("./images/ChooseMission/fanwai.png")):2==this.settingBtn&&(console.log("setting Btn clcik"),window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),this.settingScene.init("./images/Setting/BG.png")),this.isShowTips>0&&(st.globalAlpha=this.isShowTips/100,this.tips.drawToCanvas(st),st.globalAlpha=1,this.isShowTips--)}};let dt=canvas.getContext("2d"),lt="./images/Begin/BG.png";let ut=canvas.getContext("2d");document.documentElement.clientWidth||document.body.clientWidth;const mt=document.documentElement.clientHeight||document.body.clientHeight;let pt=canvas.getContext("2d");document.documentElement.clientWidth||document.body.clientWidth;const gt=document.documentElement.clientHeight||document.body.clientHeight;let vt=canvas.getContext("2d");document.documentElement.clientWidth||document.body.clientWidth;const wt=document.documentElement.clientHeight||document.body.clientHeight;document.documentElement.clientWidth||document.body.clientWidth,document.documentElement.clientHeight||document.body.clientHeight;let yt=canvas.getContext("2d");const Tt=document.documentElement.clientWidth||document.body.clientWidth,bt=document.documentElement.clientHeight||document.body.clientHeight,ft=1080/Tt,It=1920/bt;let xt=canvas.getContext("2d");class Ft{constructor(t){this.missionId=t,this.atlas=new Image,this.atlas.src="images/certificate/cerBG"+t+".png"}init(){this.clickType=-1,this.congratulate=new L("images/certificate/cetifer.png",[2,2],969,142,[.07,.1]),this.again=new L("images/certificate/cetifer.png",[1294,2],319,118,[.15,.718]),this.screenshot=new L("images/certificate/cetifer.png",[973,2],319,118,[.55,.717]),this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.touchstart=this.certificatetouch.bind(this),canvas.addEventListener("touchstart",this.touchstart)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}render(){xt.drawImage(this.atlas,0,0,1080,1920,0,0,1080/ft,1920/It),this.again.drawToCanvas(xt),this.congratulate.drawToCanvas(xt),this.screenshot.drawToCanvas(xt);
if(0 == this.clickType){
    window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),Rt[this.missionId].restart()
}else if(1 == this.clickType){
    var canvasElement = document.getElementById('canvas');

    var MIME_TYPE = "image/png";

    var Url = canvasElement.toDataURL(MIME_TYPE);

    var s = ['一','二','三','四']
    var name = "第"+s[this.missionId]+"关荣耀证书.png";
    
    /*var dlLink = document.createElement('a');
    dlLink.download = name;
    dlLink.href = Url;
    dlLink.dataset.downloadurl = [MIME_TYPE, dlLink.download, dlLink.href].join(':');

    document.body.appendChild(dlLink);
    dlLink.click();
    document.body.removeChild(dlLink);*/
    this.clickType = -1

    var blob=new Blob([''], {type:'application/octet-stream'});
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = Url;
    a.download = name;
    var e = document.createEvent('MouseEvents');
    e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    a.dispatchEvent(e);
    URL.revokeObjectURL(url);
}
}certificatetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;console.log(this.clickType),this.again.checkIsFingerOnThis(i,s)&&(this.clickType=0),this.screenshot.checkIsFingerOnThis(i,s)&&(this.clickType=1)}}const Et=document.documentElement.clientWidth||document.body.clientWidth,Lt=document.documentElement.clientHeight||document.body.clientHeight,Ct=1080/Et,At=1920/Lt;let St,kt=canvas.getContext("2d");s.d(i,"progress",function(){return qt}),s.d(i,"Mission",function(){return Rt}),s.d(i,"complete",function(){return Pt}),s.d(i,"start",function(){return Kt}),s.d(i,"music",function(){return jt});var Mt=document.getElementById("canvas");const Bt=document.documentElement.clientWidth||document.body.clientWidth,Ht=document.documentElement.clientHeight||document.body.clientHeight;Mt.width=Bt,Mt.height=Ht;const Wt=new class{constructor(){this.aniId=0,this.MissionId=1,this.personalHighScore=null,this.scale=1920/mt,this.keyImg="./images/Mission2/object.png",this.lastx=0,this.init()}init(){this.isClickKey=!1;var t=[[[361,788],[0,0],[1514,2],[749,958]],[[480,478],[1,583],[2,2],[1,1596]],[[595,788],[0,0],[758,2],[1,958]],[[1,893],[0,0],[1136,2],[749,639]],[[361,583],[0,0],[380,2],[1,1277]],[[1,1],[0,0],[1514,2],[749,1277]]],i=[[232,200,-.3,-1.79,0],[279,308,4.2,1.5,1],[129,177,14.5,-2,1],[358,95,7.9,2,1],[98,201,14.5,-1.64,1],[477,580,5,-.4,0]];this.isReturn=-1,this.bg=new c(ut,"images/Mission2/BG2.png",4005,1920,0);for(var s=[],e=0;e<t.length;e++){var n=new f(this.keyImg,t[e][0],i[e],t[e][2],t[e][3],t[e][1]);s.push(n)}this.spritesForType2=s,this.women=new f("./images/Mission2/object.png",[480,1],[283,475,-1.5,.72,0],[0,0],[-1,-1],[-1,-1]),this.player=new v("./images/Mission2/person.png",1514,2,376,920,376/this.scale,920/this.scale,.05,.5),this.welcome=new u("./images/Mission2/word.png",[[1,1],[749,1],[1,320],[749,320],[1,639]],[.3,.7],746,317),this.returnBtn=new L("images/Setting/Setting.png",[422,2],124,124,[0,0]),this.scoreImg=new O(0)}restart(){this.isReturn=-1,this.isClickKey=!1,this.welcome.count=0,this.scores=[0,0,0,0],this.bindLoop=this.loop.bind(this);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].init();this.women.init(),this.hasEventBind=!1,this.bg.init(),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.initevent()}render(){if(1==this.isReturn&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),rt.restart()),ut.clearRect(0,0,canvas.width,canvas.height),this.isSuccess()<this.scores.length||1==this.isClickKey){this.bg.render(ut),this.women.drawToCanvas(ut);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].drawToCanvas(ut);this.welcome.drawToCanvas(ut),this.player.drawToCanvas(ut),this.scoreImg.drawToCanvas(ut)}else this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),qt[0]=qt>this.aniId?qt[0]:qt[0]+1,Pt.init("./images/extra/complete2.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart);if(this.women.touched&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),Pt.init("./images/extra/fail2.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart)),5==this.welcome.count){for(t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].initEvent();this.women.initEvent(),this.welcome.count++}this.returnBtn.drawToCanvas(ut)}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.completeScene.again.checkIsFingerOnThis(i,s)&&(canvas.removeEventListener("touchstart",this.touchstart),this.restart())}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}initevent(){this.touchstart=this.eventTouchstart.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.touchend=this.eventTouchend.bind(this),canvas.addEventListener("touchend",this.touchend),this.touchmove=this.eventTouchmove.bind(this),canvas.addEventListener("touchmove",this.touchmove)}isSuccess(){var t=0;return this.scores.forEach(function(i){t+=i}),t}eventTouchstart(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.lastx=i,this.returnBtn.checkIsFingerOnThis(i,s)&&(this.isReturn=1)}eventTouchend(t){t.preventDefault();var i=-1,s=!1;if(this.welcome.count<5)this.welcome.count<3?this.welcome.update([.3,.3]):this.welcome.update([.3,.7]);else{for(var e=[-1,-1],n=[-1,-1],h=0;h<this.spritesForType2.length;h++)1==this.spritesForType2[h].isClearance&&i++,this.spritesForType2[h].touched&&(s=!0,1==this.spritesForType2[h].isClearance&&(this.scores[i]=1),e=this.spritesForType2[h].person,n=this.spritesForType2[h].words);this.player.update(e[0],e[1]),this.welcome.update([.3,.7],n[0],n[1])}this.scoreImg.update(this.isSuccess()),this.isClickKey=s}eventTouchmove(t){if(t.preventDefault(),this.welcome.count>4){let e=t.touches[0].clientX;var i=(this.lastx-e)*this.scale;if(console.log("移动"+i),this.bg.isIntheExtent(i)){this.bg.update(i);for(var s=0;s<this.spritesForType2.length;s++)this.spritesForType2[s].update(i);this.women.update(i),this.lastx=e}}}removeAllTouchListner(){if(canvas.removeEventListener("touchstart",this.touchstart),canvas.removeEventListener("touchend",this.touchend),canvas.removeEventListener("touchmove",this.touchmove),void 0!==this.spritesForType2){for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].removeListener();this.women.removeListener()}}},Ot=new class{constructor(){this.aniId=0,this.MissionId=0,this.personalHighScore=null,this.scale=1920/D,this.keyImg="./images/Mission1/object.png",this.lastx=0,this.init()}init(){this.isClickKey=!1,this.rightwindow=new f(this.keyImg,[977,2],[323,573,.42,.5],[-1,-1],[-1,-1],[652,2]),this.fly=new f(this.keyImg,[800,848],[62,77,3.5,1,1],[855,1],[1,639],[0,0]),this.fly.visible=!1;var t=[[[1071,577],[800,577],[1,1],[749,639]],[[401,577],[2,577],[855,938],[1,320]],[[1412,354],[0,0],[428,1],[1,1]],[[864,848],[0,0],[428,1],[749,1]],[[1302,354],[0,0],[1,938],[749,320]],[[1302,202],[0,0],[428,1],[749,1277]],[[327,2],[2,2],[-1,-1],[-1,-1]]],i=[[269,269,2.9,1.3,1],[397,360,-3.2,.38,1],[52,113,14,.82,0],[110,49,9,.61,0],[108,103,19.5,-1.8,1],[139,150,7.8,-1,0],[323,573,-.5,.5,0]];this.isReturn=-1,this.bg=new c(X,"images/Mission1/BG.png",4e3,1920,1080),this.fail=new f(this.keyImg,[1302,2],[190,190,7,2,0],[0,0],[0,1200],[340,140]);for(var s=[],e=0;e<t.length;e++){var n=new f(this.keyImg,t[e][0],i[e],t[e][2],t[e][3],t[e][1]);s.push(n)}this.spritesForType2=s,this.player=new v("./images/Mission1/person.png",428,938,425,935,425/this.scale,935/this.scale,0,.5),this.welcome=new u("./images/Mission1/word.png",[[1,958],[1,1277],[1,1596],[749,958]],[.3,.7],746,317),this.returnBtn=new L("images/Setting/Setting.png",[422,2],124,124,[0,0]),this.scoreImg=new O(0)}restart(){this.isReturn=-1,this.isClickKey=!1,this.welcome.count=0,this.scores=[0,0,0,0],this.bindLoop=this.loop.bind(this);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].init();this.fly.init(),this.rightwindow.init(),this.fail.init(),this.hasEventBind=!1,this.bg.init(),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.initevent()}render(){if(1==this.isReturn&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),rt.restart()),X.clearRect(0,0,canvas.width,canvas.height),this.isSuccess()<this.scores.length||1==this.isClickKey){this.bg.render(X);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].drawToCanvas(X);this.fail.drawToCanvas(X),this.welcome.drawToCanvas(X),this.rightwindow.drawToCanvas(X),this.fly.drawToCanvas(X),this.player.drawToCanvas(X),this.scoreImg.drawToCanvas(X)}else this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),qt[0]=qt>this.aniId?qt[0]:qt[0]+1,Pt.init("./images/extra/complete1.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart);if(1==this.fail.touched&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),Pt.init("./images/extra/fail1.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart)),4==this.welcome.count){for(t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].initEvent();this.rightwindow.initEvent(),this.fly.initEvent(),this.fail.initEvent(),this.welcome.count=5}this.returnBtn.drawToCanvas(X)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}initevent(){this.touchstart=this.eventTouchstart.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.touchend=this.eventTouchend.bind(this),canvas.addEventListener("touchend",this.touchend),this.touchmove=this.eventTouchmove.bind(this),canvas.addEventListener("touchmove",this.touchmove)}isSuccess(){var t=0;return this.scores.forEach(function(i){t+=i}),t}eventTouchstart(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.lastx=i,this.returnBtn.checkIsFingerOnThis(i,s)&&(this.isReturn=1)}eventTouchend(t){t.preventDefault(),console.log("touchend");var i=-1,s=!1;if(this.welcome.count<4)this.welcome.update([.3,.7]);else{for(var e=[-1,-1],n=[-1,-1],h=0;h<this.spritesForType2.length;h++)1==this.spritesForType2[h].isClearance&&i++,this.spritesForType2[h].touched&&(s=!0,1==this.spritesForType2[h].isClearance&&(this.scores[i]=1),e=this.spritesForType2[h].person,n=this.spritesForType2[h].words);i++,this.fly.touched&&(s=!0,this.scores[i]=1,e=this.fly.person,n=this.fly.words),this.rightwindow.touched?(s=!0,this.fly.visible=!0):this.fly.visible=!1,this.player.update(e[0],e[1]),this.welcome.update([.3,.7],n[0],n[1])}this.scoreImg.update(this.isSuccess()),this.isClickKey=s}eventTouchmove(t){if(t.preventDefault(),this.welcome.count>4){let e=t.touches[0].clientX;var i=(this.lastx-e)*this.scale;if(console.log("移动"+i),this.bg.isIntheExtent(i)){this.bg.update(i);for(var s=0;s<this.spritesForType2.length;s++)this.spritesForType2[s].update(i);this.fail.update(i),this.fly.update(i),this.rightwindow.update(i),this.lastx=e}}}removeAllTouchListner(){if(canvas.removeEventListener("touchstart",this.touchstart),canvas.removeEventListener("touchend",this.touchend),canvas.removeEventListener("touchmove",this.touchmove),void 0!==this.spritesForType2){for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].removeListener();this.fail.removeListener(),this.fly.removeListener(),this.rightwindow.removeListener()}}},Xt=new class{constructor(){this.aniId=0,this.MissionId=2,this.personalHighScore=null,this.scale=1920/gt,this.keyImg="./images/Mission3/object.png",this.lastx=0,this.init()}init(){this.isClickKey=!1;var t=[[[1,789],[0,0],[502,1],[1,320]],[[546,480],[0,0],[502,933],[749,958]],[[546,279],[0,0],[1003,933],[1,639]],[[546,1],[0,0],[1003,1],[749,320]],[[546,1],[0,0],[1003,1],[749,320]],[[546,1],[0,0],[1003,1],[749,320]],[[1,400],[1,400],[1,1],[1,958]],[[398,1],[0,0],[1504,1],[749,639]],[[375,690],[0,0],[1,933],[749,1]]],i=[[182,131,-5,.39,0],[181,181,4,2.65,1],[161,199,5.5,.6,1],[168,276,1,3.5,1],[168,276,-2,3.5,1],[168,276,-5,3.5,1],[372,387,-1,.8,0],[146,687,-13,.2,1],[191,257,-5,2,1]];this.isReturn=-1,this.bg=new c(pt,"images/Mission3/BG.png",4012,1920,1580);for(var s=[],e=0;e<t.length;e++){var n=new f(this.keyImg,t[e][0],i[e],t[e][2],t[e][3],t[e][1]);s.push(n)}this.spritesForType2=s,this.fail=new f("./images/Mission3/object.png",[1,1],[395,397,3,1,1],[0,0],[-1,-1],[-1,-1]),this.player=new v("./images/Mission3/person.png",1,1,499,930,499/this.scale,930/this.scale,0,.5),this.welcome=new u("./images/Mission3/word.png",[[1,958],[1,1]],[.3,.7],746,317),this.returnBtn=new L("images/Setting/Setting.png",[422,2],124,124,[0,0]),this.scoreImg=new O(1)}restart(){this.isReturn=-1,this.isClickKey=!1,this.welcome.count=0,this.scores=[0,0,0,0,0],this.bindLoop=this.loop.bind(this);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].init();this.fail.init(),this.hasEventBind=!1,this.bg.init(),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.initevent()}render(){if(1==this.isReturn&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),rt.restart()),pt.clearRect(0,0,canvas.width,canvas.height),this.isSuccess()<this.scores.length||1==this.isClickKey){this.bg.render(pt),this.fail.drawToCanvas(pt);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].drawToCanvas(pt);this.welcome.drawToCanvas(pt),this.player.drawToCanvas(pt),this.scoreImg.drawToCanvas(pt)}else this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),qt[0]=qt>this.aniId?qt[0]:qt[0]+1,Pt.init("./images/extra/complete3.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart);if(this.fail.touched&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),Pt.init("./images/extra/fail3.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart)),2==this.welcome.count){for(t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].initEvent();this.fail.initEvent(),this.welcome.count++}this.returnBtn.drawToCanvas(pt)}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.completeScene.again.checkIsFingerOnThis(i,s)&&(canvas.removeEventListener("touchstart",this.touchstart),this.restart())}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}initevent(){this.touchstart=this.eventTouchstart.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.touchend=this.eventTouchend.bind(this),canvas.addEventListener("touchend",this.touchend),this.touchmove=this.eventTouchmove.bind(this),canvas.addEventListener("touchmove",this.touchmove)}isSuccess(){var t=0;return this.scores.forEach(function(i){t+=i}),t}eventTouchstart(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.lastx=i,this.returnBtn.checkIsFingerOnThis(i,s)&&(this.isReturn=1)}eventTouchend(t){t.preventDefault();var i=!1,s=-1;if(this.welcome.count<2)this.welcome.count<1?this.welcome.update([.4,.3]):this.welcome.update([.3,.7]);else{for(var e=[-1,-1],n=[-1,-1],h=0;h<this.spritesForType2.length;h++)1==this.spritesForType2[h].isClearance&&5!=h&&4!=h&&s++,this.spritesForType2[h].touched&&(i=!0,1==this.spritesForType2[h].isClearance&&(this.scores[s]=1),e=this.spritesForType2[h].person,n=this.spritesForType2[h].words);this.player.update(e[0],e[1]),this.welcome.update([.3,.7],n[0],n[1])}this.scoreImg.update(this.isSuccess()),this.isClickKey=i}eventTouchmove(t){if(t.preventDefault(),this.welcome.count>1){let e=t.touches[0].clientX;var i=(this.lastx-e)*this.scale;if(console.log("移动"+i),this.bg.isIntheExtent(i)){this.bg.update(i);for(var s=0;s<this.spritesForType2.length;s++)this.spritesForType2[s].update(i);this.fail.update(i),this.lastx=e}}}removeAllTouchListner(){if(canvas.removeEventListener("touchstart",this.touchstart),canvas.removeEventListener("touchend",this.touchend),canvas.removeEventListener("touchmove",this.touchmove),void 0!==this.spritesForType2){for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].removeListener();this.fail.removeListener()}}},Dt=new class{constructor(){this.aniId=0,this.MissionId=3,this.personalHighScore=null,this.scale=1920/wt,this.keyImg="./images/Mission4/object.png",this.lastx=0,this.init()}init(){var t=[[[1,911],[0,0],[1,890],[749,639]],[[477,576],[0,0],[801,890],[1,1]],[[265,850],[0,0],[401,890],[749,1]],[[753,576],[0,0],[401,1],[1,639]],[[265,1],[0,0],[801,1],[1,958]],[[1,1],[0,0],[1201,1],[749,958]],[[1051,1],[0,0],[1,1],[1,1277]]],i=[[85,46,-21.9,-5.9,0],[274,266,-4.73,2.88,1],[406,138,2.2,3.3,1],[370,229,2.5,-2.5,1],[784,573,.8,0,1],[262,908,-9,.4,0],[133,565,-6,.6,1]];this.isReturn=-1,this.bg=new c(vt,"images/Mission4/BG.png",4012,1920,2e3),this.isClickKey=!1;for(var s=[],e=0;e<t.length;e++){var n=new f(this.keyImg,t[e][0],i[e],t[e][2],t[e][3],t[e][1]);s.push(n)}this.spritesForType2=s,this.fail=new f("./images/Mission4/object.png",[265,576],[210,272,-6.67,.8,1],[0,0],[-1,-1],[-1,-1]),this.player=new v("./images/Mission4/person.png",1,1,398,887,400/this.scale,930/this.scale,0,.5),this.welcome=new u("./images/Mission4/word.png",[[1,320],[749,320]],[.3,.7],746,317),this.returnBtn=new L("images/Setting/Setting.png",[422,2],124,124,[0,0]),this.scoreImg=new O(1)}restart(){this.isReturn=-1,this.isClickKey=!1,this.welcome.count=0,this.scores=[0,0,0,0,0],this.bindLoop=this.loop.bind(this);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].init();this.fail.init(),this.hasEventBind=!1,this.bg.init(),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.initevent()}render(){if(1==this.isReturn&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),rt.restart()),vt.clearRect(0,0,canvas.width,canvas.height),this.isSuccess()<this.scores.length||1==this.isClickKey){this.bg.render(vt),this.fail.drawToCanvas(vt);for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].drawToCanvas(vt);this.welcome.drawToCanvas(vt),this.player.drawToCanvas(vt),this.scoreImg.drawToCanvas(vt)}else this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),qt[0]=qt>this.aniId?qt[0]:qt[0]+1,Pt.init("./images/extra/complete4.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart);if(this.fail.touched&&(this.removeAllTouchListner(),window.cancelAnimationFrame(this.aniId),Pt.init("./images/extra/fail4.png",this.MissionId),canvas.addEventListener("touchstart",Pt.touchstart)),2==this.welcome.count){for(t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].initEvent();this.fail.initEvent(),this.welcome.count++}this.returnBtn.drawToCanvas(vt)}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.completeScene.again.checkIsFingerOnThis(i,s)&&(canvas.removeEventListener("touchstart",this.touchstart),this.restart())}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}initevent(){this.touchstart=this.eventTouchstart.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.touchend=this.eventTouchend.bind(this),canvas.addEventListener("touchend",this.touchend),this.touchmove=this.eventTouchmove.bind(this),canvas.addEventListener("touchmove",this.touchmove)}isSuccess(){var t=0;return this.scores.forEach(function(i){t+=i}),t}eventTouchstart(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.lastx=i,this.returnBtn.checkIsFingerOnThis(i,s)&&(this.isReturn=1)}eventTouchend(t){t.preventDefault();var i=!1,s=-1;if(this.welcome.count<2)this.welcome.count<1?this.welcome.update([.3,.7]):this.welcome.update([.3,.25]);else{for(var e=[-1,-1],n=[-1,-1],h=0;h<this.spritesForType2.length;h++)1==this.spritesForType2[h].isClearance&&s++,this.spritesForType2[h].touched&&(i=!0,1==this.spritesForType2[h].isClearance&&(this.scores[s]=1),e=this.spritesForType2[h].person,n=this.spritesForType2[h].words);this.player.update(e[0],e[1]),this.welcome.update([.3,.7],n[0],n[1])}this.scoreImg.update(this.isSuccess()),this.isClickKey=i}eventTouchmove(t){if(t.preventDefault(),this.welcome.count>1){let e=t.touches[0].clientX;var i=(this.lastx-e)*this.scale;if(console.log("移动"+i),this.bg.isIntheExtent(i)){this.bg.update(i);for(var s=0;s<this.spritesForType2.length;s++)this.spritesForType2[s].update(i);this.fail.update(i),this.lastx=e}}}removeAllTouchListner(){if(canvas.removeEventListener("touchstart",this.touchstart),canvas.removeEventListener("touchend",this.touchend),canvas.removeEventListener("touchmove",this.touchmove),void 0!==this.spritesForType2){for(var t=0;t<this.spritesForType2.length;t++)this.spritesForType2[t].removeListener();this.fail.removeListener()}}},Yt=new class{constructor(){this.aniId=0,this.MissionId=0,this.Bgindex=1,this.lastx=0,this.returnHome=0,this.ableClick=0,this.computeAlpha=0,this.wordAlpha=0,this.wordIndex=0,this.wordPoint=[1,679,1357]}restart(){this.Bgindex=1,this.ableClick=0,this.returnHome=0,this.wordAlpha=0,this.wordIndex=0,this.clickType=-1,this.bg=new c(yt,"images/Mission5/1.png",3240,5940,0),this.bg.sWidth=3240,this.bg.sHeight=5940,this.bg.x=0,this.tips=new L("images/Setting/tips.png",[2,2],782,164,[.16,.75]),this.compute=new L("images/Mission5/compute.png",[0,0],1080,676,[0,.25]),this.word=new L("images/Mission5/sucai.png",[1,1],1080,676,[0,.25]),this.wrong=new L("images/Mission5/sucai.png",[1083,1],755,492,[.17,.28]),this.homebtn=new L("images/Mission5/sucai.png",[1083,495],247,96,[.37,.46]),this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.touchstart=this.touch.bind(this),canvas.addEventListener("touchstart",this.touchstart)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}render(){this.bg.img.src="images/Mission5/"+this.Bgindex+".png",this.bg.render(yt),this.Bgindex<5?(yt.globalAlpha=.5,this.tips.drawToCanvas(yt),yt.globalAlpha=1):(yt.globalAlpha=this.computeAlpha/100,this.compute.drawToCanvas(yt),this.computeAlpha=this.computeAlpha<101?this.computeAlpha+1:100,this.wordIndex<3?(yt.globalAlpha=this.wordAlpha/100,this.word.drawToCanvas(yt),yt.globalAlpha=1,this.wordAlpha++,this.wordAlpha>300&&(this.wordAlpha=0,this.wordIndex++,console.log(this.wordIndex),this.word.sy=this.wordPoint[this.wordIndex])):(this.ableClick=1,this.wrong.drawToCanvas(yt),this.homebtn.drawToCanvas(yt))),1==this.returnHome&&(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",this.touchstart),Kt.init())}touch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.Bgindex<5?this.Bgindex++:this.homebtn.checkIsFingerOnThis(i,s)&&1==this.ableClick&&(this.returnHome=1)}};var qt=[0];const Rt=[Ot,Wt,Xt,Dt,Yt],Pt=new class{constructor(){this.atlas=new Image}init(t,i){this.isShowTips=-1,this.missionId=i,this.clickType=-1,this.atlas.src=t,this.again=new L("images/extra/btnsprite.png",[1462,164],407,122,[.05,.3]),this.next=new L("images/extra/btnsprite.png",[1053,164],407,122,[.55,.3]),this.getCet=new L("images/extra/btnsprite.png",[1,181],407,122,[.3,.4]),this.tips=new L("images/Setting/tips.png",[2,168],782,164,[.16,.75]),this.certifiScene=new Ft(i),this.touchstart=this.completetouch.bind(this),this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}render(){kt.drawImage(this.atlas,0,0,1080,1920,0,0,1080/Ct,1920/At),this.again.drawToCanvas(kt),this.next.drawToCanvas(kt),this.getCet.drawToCanvas(kt),0==this.clickType?(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",Pt.touchstart),Rt[Pt.missionId].restart()):1==Pt.clickType?this.isShowTips>0?(kt.globalAlpha=this.isShowTips/100,this.tips.drawToCanvas(kt),kt.globalAlpha=1,this.isShowTips--,0==this.isShowTips&&(Pt.clickType=-1)):(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",Pt.touchstart),Rt[Pt.missionId+1].restart()):2==Pt.clickType&&(this.isShowTips>0?(kt.globalAlpha=this.isShowTips/100,this.tips.drawToCanvas(kt),kt.globalAlpha=1,this.isShowTips--,0==this.isShowTips&&(Pt.clickType=-1)):(window.cancelAnimationFrame(this.aniId),canvas.removeEventListener("touchstart",Pt.touchstart),this.certifiScene.init()))}completetouch(t){t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;console.log(Pt.clickType),Pt.again.checkIsFingerOnThis(i,s)&&(Pt.clickType=0),Pt.next.checkIsFingerOnThis(i,s)&&(Pt.missionId+1>qt[0]&&(this.isShowTips=100),Pt.clickType=1),Pt.getCet.checkIsFingerOnThis(i,s)&&(Pt.missionId+1>qt[0]&&(this.isShowTips=100),Pt.clickType=2)}},Kt=new class{init(){this.atlas=new Image,this.atlas.src=lt,this.point=new Image,this.point.src="./images/extra/point.png",this.pointx=-1,this.pointy=-1,this.pointShow=0,jt.playBgm(),this.start=new L("./images/Begin/start.png",[0,0],910,361,[.08,.7]),this.start.drawToCanvas(dt),this.isStart=0,this.bindLoop=this.loop.bind(this),this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.touchstart=this.completetouch.bind(this),canvas.addEventListener("touchstart",this.touchstart),this.pointstart=this.pointtouch.bind(this),canvas.addEventListener("touchstart",this.pointstart),this.pointmove=this.touchmove.bind(this),canvas.addEventListener("touchstart",this.pointmove)}loop(){this.aniId=window.requestAnimationFrame(this.bindLoop,canvas),this.render()}completetouch(t){console.log(1),t.preventDefault();let i=t.touches[0].clientX,s=t.touches[0].clientY;this.start.checkIsFingerOnThis(i,s)&&(this.isStart=1)}pointtouch(t){t.preventDefault(),jt.playShoot(),this.pointx=t.touches[0].clientX,this.pointy=t.touches[0].clientY}touchmove(t){t.preventDefault(),this.pointx=t.touches[0].clientX,this.pointy=t.touches[0].clientY,dt.drawImage(this.point,this.pointx,this.pointy)}render(){0==this.isStart&&(dt.drawImage(this.atlas,0,0,1080,1920,0,0,1080/at,1920/ct),this.start.drawToCanvas(dt)),this.pointShow>0&&(this.pointShow--,dt.drawImage(this.point,this.pointx,this.pointy)),1==this.isStart&&(this.isStart=2,canvas.removeEventListener("touchstart",this.touchstart),canvas.addEventListener("touchstart",this.pointstart),rt.init())}},jt=new class{constructor(){if(St)return St;St=this,this.bgmAudio=new Audio,this.bgmAudio.loop=!0,this.bgmAudio.src="audio/bgm.mp3",this.shootAudio=new Audio,this.shootAudio.src="audio/click.mp3",this.isPlayBgm=1,this.isPlayShoot=1,this.playBgm()}playBgm(){1==this.isPlayBgm?this.bgmAudio.play():this.bgmAudio.pause()}playShoot(){1==this.isPlayShoot&&(this.shootAudio.currentTime=0,this.shootAudio.play())}playExplosion(){this.boomAudio.currentTime=0,this.boomAudio.play()}};Kt.init()}]);